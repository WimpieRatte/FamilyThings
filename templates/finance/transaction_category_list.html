{% extends "site/site_base.html" %}
{% block append_to_head %}
  {% comment %} Data tables 2 + htmx stuff {% endcomment %}
  <script src="https://unpkg.com/htmx.org@2.0.7/dist/htmx.min.js"></script>
  <style>
    .loading {
        opacity: 0.5;
        pointer-events: none;
    }
    .htmx-request {
        cursor: wait;
    }
  </style>
{% endblock %}

{% load render_table from django_tables2 %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Transaction Categories</h1>
    <div>
        <a href="{% url 'finance:transaction_pattern_list' %}" class="btn btn-outline-secondary me-2">
            Back to Transaction Patterns
        </a>
        <a href="{% url 'finance:transaction_category_create' %}" class="btn btn-primary">Add New Transaction Category</a>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Transaction Categories</h5>
    </div>
    <div id="transaction_category-table-container" hx-target="this" hx-swap="outerHTML">
        {% include "finance/partials/transaction_category_list_partial.html" %}
    </div>
</div>

  <script>
      // Add loading states
      document.body.addEventListener('htmx:beforeRequest', function() {
          document.body.classList.add('loading');
      });

      document.body.addEventListener('htmx:afterRequest', function() {
          document.body.classList.remove('loading');
      });
  </script>
{% endblock %}