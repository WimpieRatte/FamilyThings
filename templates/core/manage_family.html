{% extends "site/site_base.html" %}
{% block title %}Family Management - {% endblock %}
{% block content %}
{% load static %}
<div id="family-section" class="container-sm pb-4 w-100">
    {% include 'site/heading_section.html' with id="family-management" label="Family Management" %}
    <div id="family-manage" class="container rounded bg-dark p-2 h-25 mh-25">
        <div id="family-manage-wrapper" class="container d-flex flex-wrap rounded py-2">

            <div class="w-50 px-3">
                {% include 'site/heading_small.html' with id="members" title='Members' %}
                <table id="accomplishments-table" class="table table-striped bg-opacity-50" style="table-layout: fixed;">
                    <thead class="w-100 fs-sm">
                        <tr class="">
                            <th class="p-1" style="width: 5%;" scope="col">#</th>
                            <th class="p-1" id="id_" style="width: 28%;" scope="col">Display Name</th>
                            <th class="p-1" id="id_" style="width: 18%;" scope="col">Username</th>
                            <th class="p-1" id="lb-" style="width: 14%;" scope="col">Role</th>
                            <th class="p-1" id="lb-" style="width: 20%;" scope="col">Joined</th>
                            <th class="p-1" id="lb-" style="width: 10%;" scope="col"></th>
                        </tr>
                    </thead>
                    <tbody id="accomplishments-table-body" class="fs-sm">
                        {% for member in members %}
                            {% with info=member.serialized %}
                            <tr style="vertical-align: middle;">
                                <td class="p-1"><img id="dropdown-user-icon" class="border;" style="border: solid 2px !important; border-color: var(--bs-{{info.color}}) !important;" src="{% get_media_prefix %}{{info.icon}}" 
                                    onerror="this.onerror=null; this.src='{% static 'default-user.png' %}'" height="25" width="25" alt="{% get_media_prefix %}{{icon}}"></td>
                                <td class="p-1"><div class="rounded p-1 fs-sm me-2" style="background-color: var(--bs-{{info.color}}) !important; color: var(--bs-{{info.color}}-font) !important;">{{info.full_name}}</div></td>
                                <td class="p-1">{{info.username}}</td>
                                <td class="p-1">{% include 'header/role_name.html' with manager=info.is_manager owner=family.owner name=info.username %}</td>
                                <td class="p-1">{{info.joined}}</td>
                                <td class="p-1"></td>
                            </tr>
                            {% endwith %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="w-50 px-3">
                {% include 'site/heading_small.html' with id="invite" title='Invite' %}
                <div class="bg-dark rounded-2 py-2 text-center">
                    <p id="lb-invite-code">Your Invite Code:</p>
                    <p>{{invite}}</p>
                </div>
                <button id="btn-generate-new" class="btn btn-primary border-primary mt-4 m-auto text-center d-block" type="button">Generate New</button>
            </div>
        </div>
    </div>
</div>
<script>
    btn-generate-new
</script>
{% endblock %}